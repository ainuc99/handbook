# 云固件的快速体验

极速部署云固件，对原系统无损，可并存，云固件的外置模式和混合模式来体验吧！

云固件将虚拟磁盘镜像模拟为物理磁盘，启动虚拟磁盘中的操作系统，实现了将操作系统、驱动程序、应用软件、配置和数据部署在镜像文件中，极大的简化了后续维护、备份和恢复的工作任务。同时，基于镜像文件的差分能力使得复杂工作能够被分阶段处理，带来了传统分区部署上无法实现的便捷性。

## 启动形态

云固件支持多种方式的部署，核心差别就是云固件主程序和虚拟磁盘镜像文件存储带来的差别。如下表所示：

|顺序|模式|云固件主程序|镜像文件|备注|
|:-:|:---:|:--------|:-----|:---|
|1|安装模式（独占）|内置硬盘ESP分区|内置硬盘VDs分区|独占主机的安装模式|
|2|移动模式|固态U盘或移动硬盘ESP分区|固态U盘或移动硬盘VDs分区|独占固态U盘或移动硬盘|
|3|外置模式|U盘ESP分区或启动分区|内置硬盘分区，可共享|与其他操作系统共享数据存储分区|
|4|混合模式|共享内置硬盘ESP分区|共享内置硬盘分区|与其他操作系统共享ESP分区及数据存储分区|

除了第一种“安装模式”外，第二、三种模式一般都需要在主机启动时选择U盘或者移动硬盘上的云固件，最后一种模式需要在主机启动后选择多重启动中的云固件启动项。  
后三种模式，用户也可以在计算机主机的BIOS中调整启动顺序，将云固件设置为第一启动项，后续再启动时就不需要做选择了，计算机会优先启动云固件。

第一种模式和第二种模式对使用者设备的要求较多，不太利于体验。第三种和第四种模式可以让使用者无损或者几乎无损的方式体验云固件。

## 快速体验安装

第三、四种模式安装与之前两种模式稍微有点小差别。

*注意：云固件最新版本r23715还处在beta测试阶段，未使用secure boot要求的数字签名，测试时需要计算机在BIOS中间关闭secrue boot。未关闭secure boot时，计算机会弹出红色窗口提示错误。*

### 云固件主程序

下载[云固件r1.4.23715](https://pan.baidu.com/s/1D4NuMqWCKhRA8G49_SQwAg)，得到vd.config和v1.4.23715.zip两个文件。  
解压缩v1.4.23715.zip得到v1.4.23715文件夹，备用。

#### 外置模式

插上需要作为启动盘的U盘，使用Diskgenius分区。普通USB2.0的U盘也可以。

![DiskGenius分区](/manuals/images/dg.png)

 ESP分区必选，大小100MB。**VDs分区不用创建**，剩余空间可根据需要创建，比如DATA或者UDisk等等，任意，无要求。

 将上一步获得的v1.4.23715文件夹下的EFI文件夹复制到U盘的ESP分区就完成了安装。

#### 混合模式

打开DiskGenius，选择当前系统的ESP分区，如下所示：

![使用DG复制MW云固件引导文件](/manuals/images/dg-with-mw-esp.png)

将EFI下的MW文件夹拖动到当前磁盘ESP分区下EFI目录下即可。

![DG复制MW确认](/manuals/images/dg-copy-mw-confirm.png)

复制完成后，选择“工具”-“设置UEFI BIOS启动项”，添加云固件MW的启动项

![添加云固件启动项](/manuals/images/create-mw-boot-menu.png)

确认启动文件为“\EFI\MW\MW.efi”。添加过程中，选择文件要选择efi文件的小图标，选择整行无效，可能是DG的小bug。  
选择“保存当前启动项设置”，云固件混合模式的安装就结束了。

### 云固件镜像

三、四两种模式，使用者下载云固件镜像保存到任意NTFS格式的分区（盘符）根目录下，解压缩镜像文件夹下面的镜像压缩文件。

将vd.config文件复制到刚才保存镜像的分区（盘符）下，修改，引入刚才的镜像文件夹。

### 重新启动

重新启动计算机，选择计算机多重启动的功能键，通常是F10、F12等等，选择启动的U盘或者云固件的启动项，然后就可以看到云固件的系统主界面了。

![云固件UI](/manuals/images/mw-third-look-ui.png)

## 总结

云固件的外置模式和混合模式可以让使用者在当前主机上几乎无损的体验云固件，安装完成后，后续增加、删除镜像都可以在当前系统内操作了。修改镜像设置后，必须要更新统一入口配置文件vd.config后才会生效。


更多说明可参考知乎上“AINUC云固件”专栏文章和视频。  
云固件相关文章和视频可在搜索引擎上搜索“云固件”或者“AINUC云固件”。  
欲了解更多信息可微信搜索“AINUC99”添加云固件小助手咨询。

云固件及云固件镜像提及的品牌、商标均为各自的所有者所拥有。