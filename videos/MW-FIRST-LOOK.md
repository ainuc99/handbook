# 云固件初探

## 开篇

大家好，我是陆伟峰。在上期的视频《白话云固件》里面说了一下云固件的由来，云固件其实就是用虚拟硬盘+本地启动的方式来快速部署计算机环境。
这期的视频标题是《云固件初探》，主要来讲解安装了云固件的计算机的使用情况。

## 主角

今天的主角是一台Intel NUC，猎豹峡谷，11代酷睿i7-1165CPU，就是我手里这台0.6升体积的小机器。
废话不多说，咱们开机见真章。

## 开机

打开猎豹峡谷后，我们可以看到Intel NUC的启动Logo一晃而过，然后立马就进入到了云固件的主界面。

## 云固件主界面

在这台猎豹峡谷上，我安装了三个操作系统的镜像，分别是Windows 10专业版，Windows 11专业版和Ubuntu 22.04桌面长期支持版，所以大家也可以看到有三个选择菜单，分别对应了这三个系统。
这三个菜单下面还有三个功能菜单，分别是“关于”、“重启”和“关机”。
“关于”提供了UEFI环境和云固件的信息，重启和关机就是重启计算机和关闭计算机的操作功能。

## 云固件镜像

接下来，我们先选择Windows 10系统看一下。用鼠标选中Windows10的菜单项，或者移动键盘上的方向键再按回车也是一样的。大家可以看到出现的Windows上的等待图标，然后马上就可以看到Windows桌面了。
云固件提供了常见系统的镜像，默认都是me用户。我们可以随便操作一下，和普通的Windows系统没有啥区别。
我们再来看看我的电脑里的硬盘。我这台主机的物理硬盘是一块256G的固态硬盘，我们可以看一下C盘是256G，D盘也是256G，为什么呢？其实C盘是虚拟盘，正好是256G，所以才给大家错误的印象感觉整个系统是256+256=512G的空间。

接下来，咱们再看一下Windows11系统。我们选择关机，重新启动到云固件主界面。启动过程中，我们再聊一下上面的容量问题。C盘的空间是D盘里面的虚拟文件设置的容量，如果把虚拟磁盘文件大小设置成512G，那么C盘会变成多大？那一定会是512G，物理硬盘才256G，C盘确是512G，是不是有点烧脑？云固件里面的虚拟磁盘其实就是文件而已，用户可以设定虚拟磁盘的容量上限，但虚拟磁盘文件是动态扩展的，所以没有实际写入那么多数据时，文件尺寸是不会和设定的容量那么大的。
我们可以看到Windows11已经进入桌面了，我们随便操作一下，其实也没啥不同。我们再来看看刚才说的那些虚拟磁盘文件在哪里。打开D盘，我们可以看到三个文件夹和一个vd.config文件，这就是云固件的镜像配置文件和镜像文件所在了。
每个文件夹里面就是一个系统环境。我们先看Windows11的文件夹，大家可以看到有个vhdx扩展名的文件非常大，这个就是咱们系统所在的镜像文件，咱们的C盘就对应了这个文件，往里面写文件，最终都是保存到这个镜像文件里面去了。
这里卖点小关子，这里不是还有其他vhdx文件吗？是什么用途呢？这个内容，我会在下期《云固件再探》中讲解。
我们再看一下Windows10的文件夹。返回D盘，选中这个文件夹，大家可以看到目录结构和Windows11的很相似，只是vhdx文件的名称有点不同。文件名命名不同主要是为了方便区分，其实命名成相同文件也没问题。
接下来，我们提前看一下Ubuntu系统的文件夹。打开Ubuntu的文件夹，大家也可以看到稍微一点差别，vhdx文件只有一个，这是Linux系统和Windows系统镜像支持能力不同造成的。

最后，我们来启动一下Ubuntu系统。看到这里，有同学就会提出问题，你这个和多重启动很像，有啥差别吗？有这样疑问的同学，对系统还是很了解的。多重启动，是的，云固件就是提供了多重启动能力。但这个多重启动能力和普通的操作系统多重启动有本质的区别。云固件侧重在镜像文件启动，支持多镜像启动；普通操作系统多重启动是启动多个分区里面的操作系统。复制系统就需要重构分区和复制分区，操作上比较复杂。云固件就是复制个镜像文件，给镜像配置文件增加一下启动选项。难易程度相差不是一个数量级。

Ubuntu系统也进入桌面了，我们可以打开一下应用软件，简单操作一下。开个浏览器，打开文件管理器。使用上和本机直接安装的系统也没啥区别。

## 结语

通过刚才的演示，大家可以看到几个系统在使用上和本机直接安装没啥区别。其实从原理上来说也是无感的。除了硬盘以外，所有的性能都是物理机本机最高性能。在SSD的超高速度下，虚拟硬盘的1%-5%的性能损耗也可以忽略不计。
但系统环境部署在镜像文件里面带来的便利性却提升无数。换个系统，和点菜吃饭一样容易。需要Windows10家庭版，就拷个Windows10家庭版镜像，需要Ubuntu就拷个Ubuntu镜像，众口难调就成了过去式了。

是不是很有意思？

这时候，有同学站起来说，我就只用一个Windows10，我搞云固件有用吗？嘿嘿，挑战我，我候着呢，下期视频《云固件再探》我们专门来聊聊这个话题。
